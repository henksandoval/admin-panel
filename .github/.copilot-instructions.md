# GitHub Copilot - Instrucciones del Proyecto

**Proyecto:** Admin Panel
**Stack:** Angular 20.3 + Material 20.2 (M3) + Tailwind 3.4
**Fecha:** Febrero 2026
**VersiÃ³n:** 1.0.0

---

## ğŸ¯ CONTEXTO DEL PROYECTO

Este es un panel administrativo empresarial construido con Angular 20.3, Angular Material Design 3, y Tailwind CSS. El proyecto sigue una arquitectura **Atomic Design** estricta y tiene reglas muy especÃ­ficas sobre estilos y patrones de cÃ³digo.

### TecnologÃ­as Core
- **Angular 20.3.0** - Framework con standalone components y Signals API
- **Angular Material 20.2.14 (M3)** - Sistema de diseÃ±o y componentes
- **Tailwind CSS 3.4.18** - Solo para layout y spacing (NO COLORES)
- **TypeScript 5.7** - Strict mode habilitado
- **SCSS** - Variables CSS y mixins del theme

---

## ğŸ“ ESTRUCTURA DEL PROYECTO

```
admin-panel/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ STYLE_GUIDE.md                    â­ LEER PRIMERO - Reglas obligatorias
â”‚   â”œâ”€â”€ AUDITORIA_APP_TABLE_COMPONENTS.md  ğŸ“Š Ejemplo de refactorizaciÃ³n
â”‚   â””â”€â”€ ANALISIS_COMPARATIVO_APP_TABLE.md  ğŸ“Š AnÃ¡lisis tÃ©cnico
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ features/              # Feature modules (dashboard, pds)
â”‚   â”‚   â”œâ”€â”€ layout/                # Layout components (toolbar, sidebar)
â”‚   â”‚   â””â”€â”€ shared/
â”‚   â”‚       â”œâ”€â”€ atoms/             # Componentes bÃ¡sicos (button, badge, table)
â”‚   â”‚       â”œâ”€â”€ molecules/         # Componentes compuestos (forms, filters)
â”‚   â”‚       â”œâ”€â”€ organisms/         # Componentes complejos (data tables)
â”‚   â”‚       â”œâ”€â”€ templates/         # Layouts de pÃ¡gina
â”‚   â”‚       â””â”€â”€ types/             # TypeScript types compartidos
â”‚   â””â”€â”€ themes/
â”‚       â”œâ”€â”€ _variables.scss        # Tokens de layout
â”‚       â”œâ”€â”€ _theming.scss          # Theme engine
â”‚       â”œâ”€â”€ _navigation.scss       # Sistema de navegaciÃ³n
â”‚       â”œâ”€â”€ _badges.scss           # Badge styles
â”‚       â””â”€â”€ styles.scss            # Entry point
```

### Atomic Design Hierarchy

**Atoms** â†’ Componentes indivisibles (button, input, icon, badge)
**Molecules** â†’ Grupos de atoms (form-input con label y error)
**Organisms** â†’ Secciones completas (table con filters y pagination)
**Templates** â†’ Layouts de pÃ¡gina (page-layout con header y content)

---

## ğŸ”´ REGLAS CRÃTICAS (NO NEGOCIABLES)

### 1. ğŸ“ CSS INLINE - CRITERIO PRAGMÃTICO

**Usa CSS inline para componentes pequeÃ±os y simples. Usa archivo SCSS externo para componentes complejos.**

#### âœ… CSS Inline PERMITIDO cuando:
- Componente tiene **<50 lÃ­neas de estilos**
- Estilos son **simples** (sin gradientes complejos, sin mÃºltiples estados)
- **NO necesita mixins** del theme
- Estilos **NO se reutilizan** en otros componentes
- Componente es **auto-contenido** y pequeÃ±o

```typescript
// âœ… BIEN - Componente simple con pocos estilos
@Component({
  selector: 'app-simple-badge',
  standalone: true,
  styles: [`
    :host {
      display: inline-flex;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
    }
  `],
  template: `<ng-content></ng-content>`
})
```

#### âŒ CSS Inline NO PERMITIDO cuando:
- Componente tiene **>50 lÃ­neas de estilos**
- Necesita **mixins del theme** o **tokens complejos**
- Tiene **mÃºltiples estados** (hover, active, disabled, etc.)
- Estilos se **reutilizan** en mÃºltiples lugares
- Requiere **lÃ³gica SCSS** (loops, conditionals, functions)

```typescript
// âŒ MAL - Componente complejo con muchos estilos
@Component({
  selector: 'app-table',
  styles: [` // âŒ 176 lÃ­neas inline con colores, estados, gradientes
    .table { background: white; }
    .row:hover { background: rgba(0,0,0,0.04); }
    // ... 170+ lÃ­neas mÃ¡s ...
  `]
})

// âœ… BIEN - Archivo externo para componente complejo
@Component({
  selector: 'app-table',
  styleUrls: ['./app-table.component.scss']
})
```

**Regla de oro:** Si dudas, usa archivo externo. Es mÃ¡s fÃ¡cil mantener y permite crecer el componente sin refactorizar despuÃ©s.

---

### 2. âœ… MATERIAL GESTIONA TODOS LOS COLORES

**Principio Ãºnico:** Angular Material gestiona theming. Tailwind gestiona layout.

```html
<!-- âŒ MAL - Colores con Tailwind -->
<button class="bg-blue-500 text-white">Guardar</button>
<div class="bg-white dark:bg-gray-800">Contenido</div>
<mat-icon class="text-blue-600">check</mat-icon>

<!-- âœ… BIEN - Colores con Material -->
<button mat-raised-button color="primary">Guardar</button>
<mat-card appearance="outlined">Contenido</mat-card>
<mat-icon color="primary">check</mat-icon>
```

**Tailwind permitido solo para:**
- âœ… Layout: `flex`, `grid`, `items-center`, `justify-between`
- âœ… Spacing: `p-6`, `m-4`, `gap-4`, `space-y-2`
- âœ… Sizing: `w-full`, `h-screen`, `max-w-4xl`
- âœ… Borders SIN color: `border-t`, `border-b`, `rounded-lg`
- âœ… Shadows bÃ¡sicos: `shadow-sm`, `shadow-md`

**Tailwind PROHIBIDO para:**
- âŒ Colores: `bg-*`, `text-*`, `border-blue-500`
- âŒ Dark mode: `dark:bg-gray-800`, `dark:text-white`

---

### 3. âœ… DEFAULTS OBLIGATORIOS

**TODOS los componentes deben tener constante DEFAULTS en su `.model.ts`:**

```typescript
// âœ… En app-table.model.ts
export const TABLE_DEFAULTS = {
  emptyMessage: 'No hay datos disponibles',
  stickyHeader: false,
  clickableRows: false,
} as const;

// Uso en componente:
emptyMessage = input<string>(TABLE_DEFAULTS.emptyMessage);
stickyHeader = input<boolean>(TABLE_DEFAULTS.stickyHeader);
```

**Ver ejemplos:**
- [app-button.model.ts](src/app/shared/atoms/app-button/app-button.model.ts)
- [app-table.model.ts](src/app/shared/atoms/app-table/app-table.model.ts)
- [app-badge.model.ts](src/app/shared/atoms/app-badge/app-badge.model.ts)

---

### 4. âœ… COMPUTED SIGNALS PARA CLASES

**Usa computed() para lÃ³gica de clases dinÃ¡micas:**

```typescript
// âŒ MAL
hasActions(): boolean {
  return !!this.config().actions?.length;
}

// âœ… BIEN
hasActions = computed(() => !!this.config().actions?.length);

tableClasses = computed(() => {
  const classes: string[] = ['app-table'];
  if (this.stickyHeader()) classes.push('sticky-header');
  return classes.join(' ');
});
```

**Uso en template:**
```html
<table [class]="tableClasses()">
```

---

### 5. âœ… PREFIJADO DE CLASES CSS

**TODAS las clases CSS deben tener prefijo del componente:**

```scss
// âŒ MAL - Clases genÃ©ricas
.table { }
.row { }
.cell { }

// âœ… BIEN - Prefijo del componente
.app-table { }
.app-table-row { }
.app-table-cell { }
```

**PatrÃ³n:** `app-{componente}-{elemento}`

---

### 6. âœ… TOKENS DEL PROYECTO EN SCSS

**SIEMPRE usa tokens CSS del proyecto (NO hardcoded):**

```scss
// âŒ MAL
.row:hover {
  background: var(--mat-sys-surface, white); // âŒ Fallback hardcoded
  border: 1px solid rgba(0, 0, 0, 0.12);     // âŒ Hardcoded
  color: #1976d2;                             // âŒ Hardcoded
}

// âœ… BIEN
.app-table-row.clickable:hover {
  background-color: var(--overlay-light-04);
  cursor: pointer;
}

.app-table-cell.sticky-start {
  border-right: 1px solid var(--overlay-light-12);
}
```

**Tokens disponibles:**
- Layout: `var(--sidebar-width-expanded)`, `var(--toolbar-height)`, `var(--transition-fast)`
- Overlays: `var(--overlay-light-04)`, `var(--overlay-light-12)`, `var(--overlay-dark-10)`
- Navigation: `var(--nav-item-hover-bg)`, `var(--nav-item-active-bg)`

**Ver definiciones:** [src/themes/_variables.scss](src/themes/_variables.scss)

---

### 7. âœ… CÃ“DIGO FUNCIONAL MODERNO

**Usa mÃ©todos ES6+ en lugar de bucles imperativos:**

```typescript
// âŒ MAL
private cleanValues(values: Record<string, any>) {
  const cleaned = {};
  Object.entries(values).forEach(([key, value]) => {
    if (value !== null && value !== undefined && value !== '') {
      cleaned[key] = value;
    }
  });
  return cleaned;
}

// âœ… BIEN
private cleanValues(values: Record<string, any>) {
  return Object.fromEntries(
    Object.entries(values).filter(([_, value]) => 
      value !== null && value !== undefined && value !== ''
    )
  );
}

// âŒ MAL
isDisabled(action, row) {
  return action.disabled ? action.disabled(row) : false;
}

// âœ… BIEN
isDisabled(action, row) {
  return !!action.disabled?.(row);
}
```

**MÃ©todos recomendados:**
- âœ… `Object.fromEntries()` + `filter()` en lugar de `forEach` + mutaciÃ³n
- âœ… Optional chaining `?.` en lugar de ternarios
- âœ… Nullish coalescing `??` en lugar de `||`
- âœ… `map()`, `filter()`, `reduce()` en lugar de `for` loops

---

## ğŸ“‹ ESTRUCTURA DE COMPONENTES

**Cada componente debe tener exactamente estos archivos:**

```
app-table/
â”œâ”€â”€ app-table.component.ts       # LÃ³gica y template
â”œâ”€â”€ app-table.component.scss     # Estilos (NUNCA inline)
â”œâ”€â”€ app-table.component.spec.ts  # Tests
â””â”€â”€ app-table.model.ts           # Interfaces + DEFAULTS
```

### DistribuciÃ³n de responsabilidades:

**`.model.ts`** - Types y constantes
```typescript
export interface AppTableConfig<T> { }
export interface AppTableColumn<T> { }
export const TABLE_DEFAULTS = { } as const;
```

**`.component.ts`** - LÃ³gica y template
```typescript
@Component({
  selector: 'app-table',
  standalone: true,
  imports: [CommonModule, MatTableModule, ...],
  styleUrls: ['./app-table.component.scss'],
  template: `...`
})
export class AppTableComponent<T> { }
```

**`.component.scss`** - Estilos custom
```scss
.app-table-wrapper { }
.app-table-row.clickable:hover {
  background-color: var(--overlay-light-04);
}
```

---

## âœ… CHECKLIST PRE-IMPLEMENTACIÃ“N

Antes de escribir cÃ³digo, verifica:

### Estilos:
- [ ] âœ… UsarÃ© archivo SCSS si el componente tiene >50 lÃ­neas de estilos o necesita mixins
- [ ] âœ… UsarÃ© CSS inline solo para componentes simples (<50 lÃ­neas, sin mixins)
- [ ] âœ… NO usarÃ© colores de Tailwind (`bg-*`, `text-*`, `border-blue-*`)
- [ ] âœ… NO usarÃ© `dark:` de Tailwind
- [ ] âœ… UsarÃ© Material para colores (`color="primary"`)
- [ ] âœ… UsarÃ© Tailwind solo para layout (`flex`, `p-6`, `gap-4`)
- [ ] âœ… UsarÃ© tokens del proyecto en SCSS (`var(--overlay-light-XX)`)

### Componentes:
- [ ] âœ… CrearÃ© archivo `.model.ts` con interfaces y DEFAULTS
- [ ] âœ… CrearÃ© archivo `.component.scss` externo
- [ ] âœ… UsarÃ© computed signals para lÃ³gica de clases
- [ ] âœ… Prefijo todas las clases CSS con `app-{componente}-`
- [ ] âœ… UsarÃ© cÃ³digo funcional moderno (no bucles imperativos)

### Build:
- [ ] âœ… El build debe pasar: `ng build --configuration=development`
- [ ] âœ… Sin errores de TypeScript
- [ ] âœ… Sin warnings de linting

---

## ğŸ” PATRONES DE CÃ“DIGO

### Pattern 1: Atom Component (Button)

```typescript
// app-button.model.ts
export type ButtonColor = 'primary' | 'secondary' | 'tertiary';
export type ButtonVariant = 'filled' | 'outlined' | 'text';

export const BUTTON_DEFAULTS = {
  variant: 'filled' as const,
  color: 'primary' as ButtonColor,
  disabled: false,
} as const;

// app-button.component.ts
@Component({
  selector: 'app-button',
  standalone: true,
  imports: [MatButtonModule],
  styleUrls: ['./app-button.component.scss'],
  template: `
    <button
      [mat-raised-button]="variant() === 'filled'"
      [mat-stroked-button]="variant() === 'outlined'"
      [mat-button]="variant() === 'text'"
      [color]="color()"
      [disabled]="disabled()">
      <ng-content></ng-content>
    </button>
  `
})
export class AppButtonComponent {
  variant = input<ButtonVariant>(BUTTON_DEFAULTS.variant);
  color = input<ButtonColor>(BUTTON_DEFAULTS.color);
  disabled = input<boolean>(BUTTON_DEFAULTS.disabled);
}
```

### Pattern 2: Computed Classes

```typescript
// En componente
tableClasses = computed(() => {
  const classes: string[] = ['app-table'];
  if (this.stickyHeader()) classes.push('sticky-header');
  if (this.loading()) classes.push('loading');
  return classes.join(' ');
});

// En template
<table [class]="tableClasses()">
```

### Pattern 3: Conditional Classes with Function

```typescript
// Para clases que dependen de cada fila
rowClasses = computed(() => (row: T) => {
  const classes: string[] = ['app-table-row'];
  if (this.clickableRows()) classes.push('clickable');
  
  const customClass = this.config().rowClass;
  if (customClass) {
    const value = typeof customClass === 'function' ? customClass(row) : customClass;
    if (value) classes.push(value);
  }
  return classes.join(' ');
});

// En template
<tr *matRowDef="let row" [class]="rowClasses()(row)">
```

---

## ğŸ“š DOCUMENTOS CLAVE (LEER EN ORDEN)

1. **[STYLE_GUIDE.md](../docs/STYLE_GUIDE.md)** â­ OBLIGATORIO
   - Reglas de estilos (Material, Tailwind, SCSS)
   - Ãrbol de decisiÃ³n para estilos
   - Ejemplos de cÃ³digo correcto vs incorrecto
   - 713 lÃ­neas - Leer completo antes de empezar

2. **[README.md](../README.md)** ğŸ“–
   - DescripciÃ³n del proyecto
   - Scripts de desarrollo
   - Comandos de build

---

## ğŸ› ï¸ COMANDOS ÃšTILES

```bash
# Desarrollo
npm start              # Inicia servidor dev en localhost:4200
ng serve              # Alternativa

# Build
ng build --configuration=development    # Build de desarrollo
ng build --configuration=production     # Build de producciÃ³n

# Testing
npm test              # Ejecuta tests unitarios
ng test               # Alternativa

# Linting
ng lint               # Ejecuta ESLint

# AnÃ¡lisis
ng build --stats-json                           # Genera stats.json
npx webpack-bundle-analyzer dist/admin-panel/stats.json  # Analiza bundle
```

---

## ğŸ¯ EJEMPLOS DE COMPONENTES REALES

### Ejemplos de ATOMS (componentes bÃ¡sicos):
- **app-button**: [src/app/shared/atoms/app-button/](../src/app/shared/atoms/app-button/)
- **app-badge**: [src/app/shared/atoms/app-badge/](../src/app/shared/atoms/app-badge/)
- **app-table**: [src/app/shared/atoms/app-table/](../src/app/shared/atoms/app-table/)
- **app-checkbox**: [src/app/shared/atoms/app-checkbox/](../src/app/shared/atoms/app-checkbox/)

### Ejemplos de MOLECULES (componentes compuestos):
- **app-form-input**: [src/app/shared/molecules/app-form-input/](../src/app/shared/molecules/app-form-input/)
- **app-table-filters**: [src/app/shared/molecules/app-table-filters/](../src/app/shared/molecules/app-table-filters/)

### Ejemplos de LAYOUT:
- **toolbar**: [src/app/layout/components/toolbar/](../src/app/layout/components/toolbar/)
- **sidebar**: [src/app/layout/components/sidebar/](../src/app/layout/components/sidebar/)

---

## âš ï¸ ERRORES COMUNES A EVITAR

### Error 1: CSS Inline en Componente Complejo
```typescript
// âŒ MAL - Componente complejo con >50 lÃ­neas inline
@Component({
  selector: 'app-complex-table',
  styles: [` // âŒ 150+ lÃ­neas con estados, gradientes, mixins necesarios
    .table { background: var(--mat-sys-surface, white); }
    .row:hover { background: rgba(0,0,0,0.04); }
    .row.active { background: linear-gradient(...); }
    // ... 145+ lÃ­neas mÃ¡s ...
  `]
})

// âœ… BIEN - Archivo externo para componente complejo
@Component({
  selector: 'app-complex-table',
  styleUrls: ['./complex-table.component.scss']
})

// âœ… TAMBIÃ‰N BIEN - Inline para componente simple
@Component({
  selector: 'app-simple-badge',
  styles: [` // âœ… Solo 8 lÃ­neas, sin estados complejos
    :host {
      display: inline-flex;
      padding: 4px 8px;
      border-radius: 4px;
    }
  `]
})
```

### Error 2: Colores con Tailwind
```html
<!-- âŒ NUNCA HAGAS ESTO -->
<button class="bg-blue-500 text-white">Guardar</button>
<div class="bg-white dark:bg-gray-800">Contenido</div>
```

### Error 3: Sin DEFAULTS
```typescript
// âŒ NUNCA HAGAS ESTO
export class MyComponent {
  text = input<string>('Default text'); // âŒ String literal
  enabled = input<boolean>(false);      // âŒ Valor hardcoded
}

// âœ… SIEMPRE HAZ ESTO
export const MY_COMPONENT_DEFAULTS = {
  text: 'Default text',
  enabled: false,
} as const;

export class MyComponent {
  text = input<string>(MY_COMPONENT_DEFAULTS.text);
  enabled = input<boolean>(MY_COMPONENT_DEFAULTS.enabled);
}
```

### Error 4: Clases sin prefijo
```scss
// âŒ NUNCA HAGAS ESTO
.table { }
.row { }
.cell { }

// âœ… SIEMPRE HAZ ESTO
.app-table { }
.app-table-row { }
.app-table-cell { }
```

---

## ğŸš€ FLUJO DE TRABAJO RECOMENDADO

### Al crear un nuevo componente:

1. **Planear estructura**
   - Â¿Es atom, molecule u organism?
   - Â¿QuÃ© props necesita?
   - Â¿Necesita DEFAULTS?

2. **Crear archivos**
   ```bash
   component-name/
   â”œâ”€â”€ component-name.component.ts
   â”œâ”€â”€ component-name.component.scss
   â”œâ”€â”€ component-name.component.spec.ts
   â””â”€â”€ component-name.model.ts
   ```

3. **Implementar en orden**
   - `.model.ts` primero (interfaces + DEFAULTS)
   - `.component.ts` despuÃ©s (lÃ³gica + template)
   - `.component.scss` al final (estilos custom)

4. **Verificar checklist**
   - [ ] Sin CSS inline
   - [ ] Sin colores de Tailwind
   - [ ] Con DEFAULTS
   - [ ] Con computed signals
   - [ ] Con prefijo en clases
   - [ ] Con tokens del proyecto

5. **Validar build**
   ```bash
   ng build --configuration=development
   ```

---

## ğŸ’¡ TIPS FINALES

1. **Cuando tengas dudas sobre estilos:**
   - Consulta [STYLE_GUIDE.md](../docs/STYLE_GUIDE.md) - Ãrbol de decisiÃ³n lÃ­nea 405

2. **Cuando necesites un ejemplo:**
   - Revisa componentes en `src/app/shared/atoms/`
   - Todos siguen los patrones correctos

3. **Cuando refactorices cÃ³digo:**
   - Lee [AUDITORIA_APP_TABLE_COMPONENTS.md](../docs/AUDITORIA_APP_TABLE_COMPONENTS.md)
   - Ejemplo real de refactorizaciÃ³n completa

4. **Cuando uses Material:**
   - DocumentaciÃ³n: https://material.angular.io
   - Material gestiona TODOS los colores
   - Usa `color="primary|secondary|tertiary"`

5. **Cuando uses Tailwind:**
   - Solo para layout y spacing
   - NUNCA para colores
   - NUNCA uses `dark:`

---

## ğŸ“Š MÃ‰TRICAS DE CALIDAD ESPERADAS

| MÃ©trica | Objetivo | Estado |
|---------|----------|--------|
| Build exitoso | Sin errores | âœ… Obligatorio |
| TypeScript strict | Habilitado | âœ… Obligatorio |
| CSS inline | 0 lÃ­neas | âœ… Obligatorio |
| DEFAULTS en componentes | 100% | âœ… Obligatorio |
| Prefijo en clases | 100% | âœ… Obligatorio |
| Tokens en SCSS | 100% | âœ… Obligatorio |
| Computed signals | Cuando aplique | âœ… Recomendado |
| CÃ³digo funcional | Cuando aplique | âœ… Recomendado |

---

## ğŸ”— ENLACES RÃPIDOS

- **DocumentaciÃ³n Angular:** https://angular.dev
- **Material Design 3:** https://material.angular.io
- **Tailwind CSS:** https://tailwindcss.com (solo layout)
- **TypeScript:** https://www.typescriptlang.org

---

**IMPORTANTE:** Lee [STYLE_GUIDE.md](../docs/STYLE_GUIDE.md) completo antes de escribir cualquier cÃ³digo. Es la fuente de verdad del proyecto.

---

**Ãšltima actualizaciÃ³n:** Febrero 2026
**Mantenido por:** Equipo de desarrollo
**VersiÃ³n:** 1.0.0
