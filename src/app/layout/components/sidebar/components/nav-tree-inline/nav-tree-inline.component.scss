@use "sass:map";

.nav-tree {
  background: transparent;

  .mat-tree-node {
    min-height: 44px;
    transition: background-color 150ms ease;

    $levels: (
      1: (padding: 0,       opacity-start: 25, opacity-mid: 20, opacity-end: 10),
      2: (padding: 0.5rem,  opacity-start: 20, opacity-mid: 15, opacity-end: 08),
      3: (padding: 1rem,    opacity-start: 15, opacity-mid: 10, opacity-end: 05),
      4: (padding: 1.5rem,  opacity-start: 10, opacity-mid: 08, opacity-end: 05),
      5: (padding: 2rem,    opacity-start: 08, opacity-mid: 05, opacity-end: 00),
    );

    @each $level, $props in $levels {
      $start: map.get($props, opacity-start);
      $mid: map.get($props, opacity-mid);
      $end: map.get($props, opacity-end);

      &[aria-level="#{$level}"] {
        padding-left: map.get($props, padding);

        &.parent-active {
          background: linear-gradient(
              to right,
              var(--overlay-on-primary-#{$start}) 0%,
              var(--overlay-on-primary-#{$mid}) 50%,
              var(--overlay-on-primary-#{$end}, transparent) 85%,
              transparent 100%
          );
          border-left: 2px solid var(--overlay-on-primary-#{$start});
          border-radius: 0 6px 6px 0;
        }
      }
    }

    &.active {
      background: linear-gradient(
          to right,
          var(--overlay-on-primary-40) 0%,
          var(--overlay-on-primary-30) 50%,
          var(--overlay-on-primary-15) 85%,
          transparent 100%
      );
      border-left: 3px solid var(--overlay-on-primary-80);
      box-shadow:
        inset 0 1px 0 var(--overlay-on-primary-15),
        0 2px 8px var(--overlay-shadow-10);
      position: relative;
      font-weight: 500;
    }

    &:hover:not(.active) {
      background-color: var(--nav-item-hover-bg);
    }
  }

  // Estilos para badges
  .app-badge {
    background-color: var(--overlay-on-primary-20);
    color: var(--mat-sys-on-primary);

    &.normal {
      background-color: var(--overlay-on-primary-15);
    }

    &.info {
      background-color: var(--mat-sys-tertiary-container);
      color: var(--mat-sys-on-tertiary-container);
    }

    &.warning {
      background-color: var(--mat-sys-error-container);
      color: var(--mat-sys-on-error-container);
    }
  }

  // Contenido del nodo
  .tree-node-content {
    color: var(--mat-sys-on-primary);

    mat-icon {
      color: var(--overlay-on-primary-80);
    }

    &:hover mat-icon {
      color: var(--mat-sys-on-primary);
    }
  }

  // Botón de expansión
  button[mat-icon-button] {
    color: var(--overlay-on-primary-60);

    &:hover {
      color: var(--mat-sys-on-primary);
    }
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(-8px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
}
