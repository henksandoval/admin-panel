@use "sass:map";

.nav-tree {
  background: transparent;
  color: var(--chrome-text);

  .mat-tree-node {
    min-height: 44px;
    transition: background-color 150ms ease;
    color: inherit;

    $levels: (
      1: (padding: 0,       opacity-start: 25, opacity-mid: 20, opacity-end: 10),
      2: (padding: 0.5rem,  opacity-start: 20, opacity-mid: 15, opacity-end: 08),
      3: (padding: 1rem,    opacity-start: 15, opacity-mid: 10, opacity-end: 05),
      4: (padding: 1.5rem,  opacity-start: 10, opacity-mid: 08, opacity-end: 05),
      5: (padding: 2rem,    opacity-start: 08, opacity-mid: 05, opacity-end: 00),
    );

    @each $level, $props in $levels {
      $start: map.get($props, opacity-start);
      $mid: map.get($props, opacity-mid);
      $end: map.get($props, opacity-end);

      &[aria-level="#{$level}"] {
        padding-left: map.get($props, padding);

        &.parent-active {
          background: linear-gradient(
              to right,
              var(--overlay-on-primary-#{$start}) 0%,
              var(--overlay-on-primary-#{$mid}) 50%,
              var(--overlay-on-primary-#{$end}, transparent) 85%,
              transparent 100%
          );
          border-left: 2px solid var(--overlay-on-primary-#{$start});
          border-radius: 0 6px 6px 0;
        }
      }
    }

    &.active {
      background: linear-gradient(
          to right,
          var(--overlay-on-primary-40) 0%,
          var(--overlay-on-primary-30) 50%,
          var(--overlay-on-primary-15) 85%,
          transparent 100%
      );
      border-left: 3px solid var(--overlay-on-primary-80);
      box-shadow:
        inset 0 1px 0 var(--overlay-on-primary-15),
        0 2px 8px var(--overlay-shadow-10);
      position: relative;
      font-weight: 500;
    }

    &:hover:not(.active) {
      background-color: var(--nav-item-hover-bg);
    }
  }

  .tree-node-content {
    mat-icon {
      transition: color 150ms ease;
    }
  }

  button[mat-icon-button] {
    transition: color 150ms ease;
  }

  .mat-mdc-icon-button {
    color: var(--chrome-text);
  }
}
