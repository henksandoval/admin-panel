@use "sass:map";

// =============================================================================
// NAV TREE COMPONENT
// Árbol de navegación con soporte para múltiples niveles
// =============================================================================

.nav-tree {
  background: transparent;

  // ===========================================================================
  // TREE NODES
  // ===========================================================================

  .mat-tree-node {
    min-height: 44px;
    transition: background-color 150ms ease;

    // -------------------------------------------------------------------------
    // NIVELES DE PROFUNDIDAD
    // Cada nivel tiene padding progresivo y opacidades decrecientes
    // -------------------------------------------------------------------------

    $levels: (
      1: (padding: 0,       opacity-start: 25, opacity-mid: 20, opacity-end: 10),
      2: (padding: 0.5rem,  opacity-start: 20, opacity-mid: 15, opacity-end: 08),
      3: (padding: 1rem,    opacity-start: 15, opacity-mid: 10, opacity-end: 05),
      4: (padding: 1.5rem,  opacity-start: 10, opacity-mid: 08, opacity-end: 05),
      5: (padding: 2rem,    opacity-start: 08, opacity-mid: 05, opacity-end: 00),
    );

    @each $level, $props in $levels {
      $start: map.get($props, opacity-start);
      $mid: map.get($props, opacity-mid);
      $end: map.get($props, opacity-end);

      &[aria-level="#{$level}"] {
        padding-left: map.get($props, padding);

        &.parent-active {
          background: linear-gradient(
              to right,
              var(--overlay-on-primary-#{$start}) 0%,
              var(--overlay-on-primary-#{$mid}) 50%,
              var(--overlay-on-primary-#{$end}, transparent) 85%,
              transparent 100%
          );
          border-left: 2px solid var(--overlay-on-primary-#{$start});
          border-radius: 0 6px 6px 0;
        }
      }
    }

    // -------------------------------------------------------------------------
    // ESTADO ACTIVO
    // -------------------------------------------------------------------------

    &.active {
      background: linear-gradient(
          to right,
          var(--overlay-on-primary-40) 0%,
          var(--overlay-on-primary-30) 50%,
          var(--overlay-on-primary-15) 85%,
          transparent 100%
      );
      border-left: 3px solid var(--overlay-on-primary-80);
      box-shadow:
        inset 0 1px 0 var(--overlay-on-primary-15),
        0 2px 8px var(--overlay-shadow-10);
      position: relative;
      font-weight: 500;
    }

    // -------------------------------------------------------------------------
    // ESTADO HOVER
    // -------------------------------------------------------------------------

    &:hover:not(.active) {
      background-color: var(--nav-item-hover-bg);
    }
  }

  // ===========================================================================
  // NODE CONTENT
  // ===========================================================================

  .tree-node-content {
    color: var(--mat-sys-on-primary);

    mat-icon {
      color: var(--overlay-on-primary-80);
      transition: color 150ms ease;
    }

    &:hover mat-icon {
      color: var(--mat-sys-on-primary);
    }
  }

  // ===========================================================================
  // EXPAND BUTTON
  // ===========================================================================

  button[mat-icon-button] {
    color: var(--overlay-on-primary-60);
    transition: color 150ms ease;

    &:hover {
      color: var(--mat-sys-on-primary);
    }
  }
}
