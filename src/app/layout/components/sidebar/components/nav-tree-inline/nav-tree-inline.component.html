<mat-tree #tree [dataSource]="data()" [childrenAccessor]="childrenAccessor" class="nav-tree">
  <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodeToggle
    [cdkTreeNodeTypeaheadLabel]="node.title"
    [class.parent-active]="isParentOfActive(node)">
    <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.title">
      <mat-icon>{{ tree.isExpanded(node) ? 'expand_more' : 'chevron_right' }}</mat-icon>
    </button>
    <div class="tree-node-content"
         [matTooltip]="node.title"
         matTooltipPosition="right">
      @if (node.icon) {
        <mat-icon class="tree-node-icon">{{ node.icon }}</mat-icon>
      }
      <span class="tree-node-label">{{ node.title }}</span>
      @if (getTotalBadgeCount(node) > 0 && !tree.isExpanded(node)) {
        <span class="app-badge normal">{{ getTotalBadgeCount(node) }}</span>
      }
    </div>
  </mat-tree-node>

  <mat-tree-node *matTreeNodeDef="let node" [class.active]="isActive(node.url)">
    <button mat-icon-button disabled class="tree-node-spacer"></button>
    <div class="tree-node-content"
         (click)="navigate(node)"
         [matTooltip]="node.title"
         matTooltipPosition="right">
      @if (node.icon) {
        <mat-icon class="tree-node-icon">{{ node.icon }}</mat-icon>
      }
      <span class="tree-node-label">{{ node.title }}</span>
      @if (node.badge) {
        <span class="app-badge"
              [ngClass]="[node.badge.type, node.badge.indicator ? 'has-indicator' : '']">
          {{ node.badge.title }}
        </span>
      }
    </div>
  </mat-tree-node>
</mat-tree>