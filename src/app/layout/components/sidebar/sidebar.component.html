<div class="sidebar-container">
  <div class="sidebar-header">
    <div class="sidebar-header-content">
      <div class="app-logo">
        <span class="app-logo-text">A</span>
      </div>
      <div [class.hidden]="!isExpanded()" class="sidebar-title-group">
        <h1 class="sidebar-title">Admin Panel</h1>
        <p class="sidebar-version">Dashboard v1.0</p>
      </div>
    </div>
  </div>

  @if (isExpanded()) {
    <div class="nav-tree-container nav-tree-expanded">
      <app-nav-tree-inline></app-nav-tree-inline>
    </div>
  } @else {
    <div class="nav-tree-container nav-tree-collapsed">
      @for (item of navigation(); track item.id) {
        <div
          [class.active]="isItemActive(item)"
          [class.parent-active]="isItemParentActive(item)"
          class="nav-icon-item">
          <button
            (click)="onIconClick(item)"
            (mouseenter)="onIconHover(item, $event)"
            [matTooltip]="item.title"
            mat-icon-button
            matTooltipPosition="right">
            <mat-icon>{{ item.icon }}</mat-icon>
            @if (item.badge) {
              <span class="nav-icon-badge">{{ item.badge.title }}</span>
            }
            @if (item.children && item.children.length > 0) {
              <span class="nav-icon-children-indicator"></span>
            }
          </button>
        </div>
      }
    </div>

    @if (showFloatingMenu()) {
      <app-nav-tree-floating
        (closed)="onFloatingNavClosed()"
        [topPosition]="hoveredIconTop()">
      </app-nav-tree-floating>
    }
  }

  <footer class="sidebar-footer">
    <div [class.collapsed]="!isExpanded()" class="sidebar-footer-content">
      <button
        (click)="toggleCollapse()"
        [matTooltip]="isExpanded() ? 'Contraer' : 'Expandir'"
        aria-label="Toggle sidebar"
        mat-icon-button
        matTooltipPosition="right">
        <mat-icon>{{ isExpanded() ? 'chevron_left' : 'chevron_right' }}</mat-icon>
      </button>
      <p [class.hidden]="!isExpanded()" class="sidebar-copyright">Â© 2025 Admin Panel</p>
    </div>
  </footer>
</div>
