<div class="flex flex-col h-full">
  <div class="settings-header flex items-center justify-between px-6 py-4">
    <h2 class="settings-title m-0">Configuración</h2>
    <button
      (click)="closePanel()"
      aria-label="Close settings"
      mat-icon-button>
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <div class="main-content flex-1 overflow-y-auto p-6">
    <div class="mb-8">
      <h3 class="section-label m-0 mb-4">Modo</h3>
      <mat-button-toggle-group
        (valueChange)="selectScheme($event)"
        [value]="config().scheme"
        aria-label="Modo de visualización"
        class="w-full"
        name="scheme">
        @for (scheme of schemes; track scheme.id) {
          <mat-button-toggle [value]="scheme.id" class="flex-1">
            <mat-icon>{{ scheme.icon }}</mat-icon>
            <span class="ml-2">{{ scheme.label }}</span>
          </mat-button-toggle>
        }
      </mat-button-toggle-group>
    </div>

    <div class="mb-8">
      <h3 class="section-label m-0 mb-4">Color de Acento</h3>
      <div class="flex gap-3 flex-wrap">
        @for (theme of themes; track theme.id) {
          <button
            (click)="selectTheme(theme.id)"
            [attr.aria-label]="theme.label"
            [class.active]="isThemeActive()(theme.id)"
            [matTooltip]="theme.label"
            class="theme-color-button"
            matTooltipPosition="above">
            <span [style.background-color]="theme.color_primary" class="theme-primary-preview"></span>
            <span [style.background-color]="theme.color_tertiary" class="theme-accent-preview"></span>
            @if (isThemeActive()(theme.id)) {
              <mat-icon class="theme-check-icon">check</mat-icon>
            }
          </button>
        }
      </div>
    </div>
  </div>
  <div class="settings-footer px-6 py-4">
    <button
      (click)="resetSettings()"
      class="w-full"
      matButton="tonal">
      Restablecer valores
    </button>
  </div>
</div>
