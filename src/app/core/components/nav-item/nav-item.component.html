<div class="nav-item-wrapper" [class.level-0]="level() === 0">
  <!-- Item with children (collapsable) -->
  @if (item().type === 'collapsable') {
    <div
      class="nav-item nav-collapsable"
      [style.padding-left]="getPaddingLeft()"
      (click)="toggleCollapse()"
      matRipple>

      @if (item().icon) {
        <mat-icon class="nav-icon">{{ item().icon }}</mat-icon>
      }

      <span class="nav-title">{{ item().title }}</span>

      <mat-icon class="nav-arrow" [class.open]="isOpen()">
        keyboard_arrow_down
      </mat-icon>
    </div>

    <!-- Children -->
    <div class="nav-children" [class.open]="isOpen()">
      @for (child of item().children; track child.id) {
        <app-nav-item
          [item]="child"
          [level]="level() + 1">
        </app-nav-item>
      }
    </div>
  }

  <!-- Simple item with link -->
  @if (item().type === 'item') {
    <a
      class="nav-item nav-link"
      [style.padding-left]="getPaddingLeft()"
      [routerLink]="item().url"
      routerLinkActive="active"
      [routerLinkActiveOptions]="{exact: false}"
      (click)="onItemClick()"
      matRipple>

      @if (item().icon) {
        <mat-icon class="nav-icon">{{ item().icon }}</mat-icon>
      }

      <span class="nav-title">{{ item().title }}</span>

      @if (item().badge) {
        <span
          class="nav-badge {{ item().badge!.bg }} {{ item().badge!.fg }} text-xs font-semibold px-2 py-0.5 rounded-full ml-auto">
          {{ item().badge!.title }}
        </span>
      }
    </a>
  }
</div>

