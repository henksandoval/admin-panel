// ────────────────────────────────────────────────────────
// Paleta basada en Catppuccin Mocha — overrideable al 100%
// con CSS custom properties desde el host o un theme global.
// ────────────────────────────────────────────────────────

:host {
  display: block;
}

.code-block {
  --_header-bg: var(--code-block-header-bg, #1e1e2e);
  --_body-bg: var(--code-block-body-bg, #181825);
  --_footer-bg: var(--code-block-footer-bg, #1e1e2e);
  --_border: var(--code-block-border, #313244);
  --_text: var(--code-block-text, #cdd6f4);
  --_text-muted: var(--code-block-text-muted, #a6adc8);
  --_accent: var(--code-block-accent, #b4befe);
  --_success: var(--code-block-success, #a6e3a1);
  --_radius: var(--code-block-radius, 0.5rem);

  border-radius: var(--_radius);
  border: 1px solid var(--_border);
  overflow: hidden;
}

// ── Header ──────────────────────────────────────────────

.code-block-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 0.75rem;
  background: var(--_header-bg);
  border-bottom: 1px solid transparent;
  transition: border-color 0.2s ease, background-color 0.15s ease;

  .is-collapsible & {
    cursor: pointer;

    &:hover {
      background: color-mix(in srgb, var(--_header-bg) 90%, white);
    }
  }

  .is-expanded & {
    border-bottom-color: var(--_border);
  }
}

.code-block-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--_text);
  letter-spacing: 0.01em;
}

.code-block-title-icon {
  font-size: 1.125rem;
  width: 1.125rem;
  height: 1.125rem;
  color: var(--_accent);
}

.code-block-actions {
  display: flex;
  align-items: center;

  button {
    color: var(--_text-muted);
    transform: scale(0.8);
    transition: color 0.2s ease;

    &:hover {
      color: var(--_text);
    }

    &.is-copied {
      color: var(--_success);
    }
  }
}

.code-block-chevron {
  color: var(--_text-muted);
  font-size: 1.25rem;
  width: 1.25rem;
  height: 1.25rem;
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);

  .is-expanded & {
    transform: rotate(180deg);
  }
}

// ── Body (collapsible via CSS grid trick) ───────────────

.code-block-body {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  background: var(--_body-bg);

  .is-expanded & {
    grid-template-rows: 1fr;
  }
}

.code-block-body-inner {
  overflow: hidden;

  pre {
    margin: 0;
    padding: 1rem 1.25rem;
    overflow-x: auto;

    &::-webkit-scrollbar {
      height: 6px;
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background: var(--_border);
      border-radius: 3px;
    }

    code {
      font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'Consolas', monospace;
      font-size: 0.8125rem;
      line-height: 1.7;
      color: var(--_text);
      white-space: pre;
      tab-size: 2;
    }
  }
}

// ── Footer ──────────────────────────────────────────────

.code-block-footer {
  padding: 0.625rem 1.25rem;
  font-size: 0.75rem;
  color: var(--_text-muted);
  background: var(--_footer-bg);
  border-top: 1px solid var(--_border);
}