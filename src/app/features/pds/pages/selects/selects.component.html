<app-pds-page-layout
  [apiProperties]="API_PROPERTIES"
  [bestPractices]="BEST_PRACTICES"
  [code]="generatedCode()"
  [currentVariant]="selectedState()"
  [variantGuides]="SELECT_STATE_GUIDES"
  componentTag="<app-form-select>"
  description="A wrapper around Material Select providing consistent styling, validation, and ergonomic API for single and multiple selection scenarios."
  title="Select Component Playground">

  <app-button (clicked)="goBack()" class="back-button mb-4" iconBefore="arrow_back" slot="header-action" variant="text">
    Back to PDS Index
  </app-button>

  <div class="w-full" slot="preview">
    @if (selectedState() === 'single') {
      <div class="w-full max-w-sm">
        <app-form-select
          [(ngModel)]="singleValue"
          [config]="{
            label: 'Select a Country',
            placeholder: 'Choose one...',
            appearance: selectedAppearance(),
            icon: showIcon() ? 'public' : '',
            hint: showHint() ? 'Select your country from the list' : ''
          }"
          [options]="currentOptions()">
        </app-form-select>
        <p class="hint-text">
          Selected: <strong>{{ singleValue() || 'None' }}</strong>
        </p>
      </div>
    }

    @if (selectedState() === 'multiple') {
      <div class="w-full max-w-sm">
        <app-form-select
          [(ngModel)]="multipleValue"
          [config]="{
            label: 'Select Frameworks',
            placeholder: 'Choose multiple...',
            appearance: selectedAppearance(),
            multiple: true,
            icon: showIcon() ? 'code' : '',
            hint: showHint() ? 'You can select multiple frameworks' : ''
          }"
          [options]="currentOptions()">
        </app-form-select>
        <p class="hint-text">
          Selected: <strong>{{ multipleValue().join(', ') || 'None' }}</strong>
        </p>
      </div>
    }

    @if (selectedState() === 'grouped') {
      <div class="w-full max-w-sm">
        <app-form-select
          [(ngModel)]="groupedValue"
          [config]="{
            label: 'Select Technology',
            placeholder: 'Choose from categories...',
            appearance: selectedAppearance(),
            icon: showIcon() ? 'category' : '',
            hint: showHint() ? 'Options are organized by category' : ''
          }"
          [options]="currentOptions()">
        </app-form-select>
        <p class="hint-text">
          Selected: <strong>{{ groupedValue() || 'None' }}</strong>
        </p>
      </div>
    }

    @if (selectedState() === 'disabled') {
      <div class="w-full max-w-sm">
        <app-form-select
          [(ngModel)]="singleValue"
          [config]="{
            label: 'Disabled Select',
            placeholder: 'Cannot interact',
            appearance: selectedAppearance(),
            icon: showIcon() ? 'block' : '',
            hint: showHint() ? 'This field is disabled' : ''
          }"
          [disabled]="true"
          [options]="currentOptions()">
        </app-form-select>
      </div>
    }
  </div>

  <div slot="controls">
    <div class="mt-2">
      <label class="section-label text-sm font-medium flex items-center gap-1.5 mb-1">
        <mat-icon>category</mat-icon>
        State Type
      </label>
      <app-toggle-group
        [(ngModel)]="selectedState"
        [options]="stateOptions"
        class="w-full"/>
    </div>

    <div class="mt-2">
      <label class="section-label text-sm font-medium flex items-center gap-1.5 mb-1">
        <mat-icon>style</mat-icon>
        Appearance
      </label>
      <app-toggle-group
        [(ngModel)]="selectedAppearance"
        [options]="appearanceOptions"
        class="w-full"/>
    </div>

    <div class="mt-2">
      <label class="section-label text-sm font-medium flex items-center gap-1.5 mb-1">
        <mat-icon>straighten</mat-icon>
        Size
      </label>
      <app-toggle-group
        [(ngModel)]="selectedSize"
        [options]="sizeOptions"
        class="w-full"/>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mt-2">
      <app-checkbox [(checked)]="showIcon" color="primary">Show Icon</app-checkbox>
      <app-checkbox [(checked)]="showHint" color="primary">Show Hint</app-checkbox>
      <app-checkbox [(checked)]="isRequired" color="tertiary">Required Field</app-checkbox>
    </div>
  </div>
</app-pds-page-layout>
