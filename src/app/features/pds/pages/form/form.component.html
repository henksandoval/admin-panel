<app-page-layout [layoutConfig]="customLayout"
                 [showEmptySlots]="true"
                 description="Complete reference with all field types and working validations"
                 title="Form Field Gallery">

  <ng-template appSlot="header">
    <header class="mb-6">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="page-title mb-2">Form Field Gallery</h1>
          <p class="page-description">
            Complete reference with all field types and working validations. Test real-time validation and explore
            different visual configurations.
          </p>
        </div>
        <app-button (clicked)="goBack()" iconBefore="arrow_back" variant="text">
          Back to PDS
        </app-button>
      </div>
    </header>
  </ng-template>

  <ng-template appSlot="left">
    <app-card icon="description" title="Complete Form Example">
      <p class="card-description mb-6">
        All field types with real validations. Try entering invalid data to see errors.
      </p>

      <form (ngSubmit)="onSubmit()" [formGroup]="galleryForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4">
          <app-form-input [config]="basicTextConfig()" appFormInputConnector formControlName="basicText">
          </app-form-input>

          <app-form-select [config]="{
                label: 'Select your country',
                placeholder: 'Choose a country',
                appearance: globalAppearance(),
                icon: showIcons() ? 'public' : '',
                hint: showHints() ? 'Select the country where you reside' : '',
                errorMessages: {
                  required: 'Country selection is required for shipping'
                }
              }" [options]="countryOptions" appFormSelectConnector formControlName="country">
          </app-form-select>
        </div>

        <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4">
          <app-form-input [config]="emailConfig()" appFormInputConnector formControlName="email">
          </app-form-input>

          <app-form-input [config]="passwordConfig()" appFormInputConnector formControlName="password">
          </app-form-input>
        </div>

        <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4">
          <app-form-input [config]="ageConfig()" appFormInputConnector formControlName="age">
          </app-form-input>

          <app-form-input [config]="phoneConfig()" appFormInputConnector formControlName="phone">
          </app-form-input>

          <app-form-datepicker [config]="birthDateConfig()" appFormDatepickerConnector
                               formControlName="birthDate">
          </app-form-datepicker>
        </div>

        <div class="md:col-span-2">
          <app-form-textarea [config]="descriptionConfig()" appFormTextareaConnector formControlName="description">
          </app-form-textarea>
        </div>

        <div class="md:col-span-2">
          <app-form-radio-group [config]="genderConfig()" [options]="genderOptions" appFormRadioGroupConnector
                                formControlName="gender">
          </app-form-radio-group>
        </div>

        <div class="md:col-span-2">
          <app-form-checkbox [config]="{
                color: 'primary',
                errorMessages: {
                  required: 'You must accept the terms and conditions to continue',
                  requiredTrue: 'Please check this box to proceed'
                }
              }" appFormCheckboxConnector formControlName="acceptTerms">
            <span class="terms-label">I accept the terms and conditions *</span>
          </app-form-checkbox>
        </div>

        <div class="md:col-span-2 flex justify-end gap-3">
          <app-button (clicked)="resetForm()" color="secondary" iconBefore="refresh" type="button" variant="outlined">
            Reset
          </app-button>

          <app-button color="primary" iconBefore="send" type="submit" variant="filled">
            Submit Form
          </app-button>
        </div>
      </form>
    </app-card>

    <app-card [expanded]="false" [isExpandable]="true" class="mt-2" icon="code" title="Generated Code">
      <button (click)="copyToClipboard(); $event.stopPropagation()" mat-icon-button matTooltip="Copiar cÃ³digo"
              slot="header-actions">
        <mat-icon>content_copy</mat-icon>
      </button>
      <pre class="code-block"><code>{{ completeFormCode() }}</code></pre>
    </app-card>
  </ng-template>

  <ng-template appSlot="right">
    <app-card icon="tune" title="Visual Controls">
      <p class="card-description mb-6">
        Change visual appearance of all fields (validations stay the same)
      </p>

      <div class="mt-2">
        <label class="section-label flex items-center gap-1.5 mb-1">
          <mat-icon>style</mat-icon>
          Appearance Style
        </label>
        <app-toggle-group [(value)]="globalAppearance" [options]="appearanceOptions" class="w-full"/>
        <p class="helper-text mt-1">
          Changes the Material Design style of all fields
        </p>
      </div>

      <mat-divider class="my-4"></mat-divider>

      <div class="mt-2">
        <label class="section-label flex items-center gap-1.5 mb-3">
          <mat-icon>visibility</mat-icon>
          Show/Hide Elements
        </label>

        <div class="checkbox-options grid grid-cols-1 gap-3">
          <app-checkbox [(checked)]="showIcons" color="primary">
            <div class="flex items-center gap-2">
              <mat-icon>insert_emoticon</mat-icon>
              <span>Show Icons</span>
            </div>
          </app-checkbox>

          <app-checkbox [(checked)]="showHints" color="primary">
            <div class="flex items-center gap-2">
              <mat-icon>info</mat-icon>
              <span>Show Hints</span>
            </div>
          </app-checkbox>

          <app-checkbox [(checked)]="showPrefixSuffix" color="primary">
            <div class="flex items-center gap-2">
              <mat-icon>text_format</mat-icon>
              <span>Show Prefix/Suffix</span>
            </div>
          </app-checkbox>
        </div>
      </div>

      <mat-divider class="my-4"></mat-divider>

      <div class="info-card">
        <mat-icon>lightbulb</mat-icon>
        <div>
          <h4 class="info-title mb-1">Try It!</h4>
          <p class="helper-text">
            Enter invalid data in the fields to see validation errors in real-time.
            The visual controls only affect appearance, not validations.
          </p>
        </div>
      </div>
    </app-card>

    <app-card class="mt-2">
      <div class="form-status-card">
        <h4 class="status-title mb-3">Form Status</h4>
        <div class="grid grid-cols-2 gap-3">
          <div class="flex flex-col gap-1">
            <span class="status-label">Status:</span>
            <span [class.status-invalid]="formStatus() === 'INVALID'"
                  [class.status-valid]="formStatus() === 'VALID'"
                  class="status-value flex items-center gap-2">
              @if (formStatus() === 'VALID') {
                <mat-icon>check_circle</mat-icon>
              } @else if (formStatus() === 'INVALID') {
                <mat-icon>error</mat-icon>
              }
              {{ formStatus() }}
            </span>
          </div>
          <div class="flex flex-col gap-1">
            <span class="status-label">Valid:</span>
            <span class="status-value">{{ formValid() }}</span>
          </div>
          <div class="flex flex-col gap-1">
            <span class="status-label">Touched:</span>
            <span class="status-value">{{ formTouched() }}</span>
          </div>
          <div class="flex flex-col gap-1">
            <span class="status-label">Dirty:</span>
            <span class="status-value">{{ formDirty() }}</span>
          </div>
        </div>
      </div>
    </app-card>
  </ng-template>

  <ng-template appSlot="footer">
    <app-pds-documentation-tabs [apiProperties]="API_PROPERTIES" [bestPractices]="BEST_PRACTICES"
                                componentTag="<app-form-input>">
    </app-pds-documentation-tabs>
  </ng-template>
</app-page-layout>
