@use 'sass:map';
@use './theme';
@use './variables';
@use './mixins' as mixins;
@use '@angular/material' as mat;

@tailwind base;
@tailwind components;
@tailwind utilities;

@include mat.core();

@each $color-name, $theme-variants in theme.$themes {
  $light-theme: map.get($theme-variants, 'light');
  $dark-theme: map.get($theme-variants, 'dark');

  // Selector para tema claro con el color específico
  // El color por defecto (default) se aplica también a :root para compatibilidad
  @if $color-name == 'default' {
    :root,
    .light-theme,
    body.theme-#{$color-name}.light-theme {
      @include mat.all-component-themes($light-theme);
    }
  } @else {
    body.theme-#{$color-name}.light-theme {
      @include mat.all-component-themes($light-theme);
    }
  }

  // Selector para tema oscuro con el color específico
  @if $color-name == 'default' {
    .dark-theme,
    body.theme-#{$color-name}.dark-theme {
      @include mat.all-component-themes($dark-theme);
    }
  } @else {
    body.theme-#{$color-name}.dark-theme {
      @include mat.all-component-themes($dark-theme);
    }
  }
}

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease;
}

mat-card,
.mat-mdc-card {
  padding: 0;
}

mat-sidenav-container,
.mat-drawer-container {
  height: 100%;
  background-color: transparent;
}

mat-sidenav-content,
.mat-drawer-content {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

mat-sidenav,
.mat-drawer {
  border-right: 1px solid var(--color-neutral-400);
  transition: border-color 0.3s ease;
}

.light-theme {
  mat-sidenav,
  .mat-drawer {
    border-right-color: var(--color-secondary-600);
  }
}

.dark-theme {
  mat-sidenav,
  .mat-drawer {
    border-right-color: var(--color-neutral-400);
  }
}

* {
  transition-property: background-color, border-color, color, fill, stroke;
  transition-duration: 200ms;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button, input, select, textarea {
  transition-property: none;
}

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-neutral-50);
}

::-webkit-scrollbar-thumb {
  background: var(--color-neutral-200);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-neutral-300);
}

.dark-theme {
  ::-webkit-scrollbar-track {
    background: var(--color-secondary-800);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-secondary-600);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-secondary-500);
  }
}

.app-theme-background {
  @include mixins.theme-background;
  @include mixins.theme-text-on-primary;
  @include mixins.theme-badge;

  &[class*="mat-"],
  &[class*="mat-mdc-"] {
    @include mixins.theme-background;
  }
}

.app-theme-background-gradient {
  @include mixins.theme-background-gradient;
  @include mixins.theme-text-on-primary;
  @include mixins.theme-badge;

  &[class*="mat-"],
  &[class*="mat-mdc-"] {
    @include mixins.theme-background-gradient;
  }
}

