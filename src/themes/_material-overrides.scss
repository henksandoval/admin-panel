@use '@angular/material' as mat;

@mixin apply-material-overrides() {
  @include _chrome-element-adjustments();
  @include _button-overrides();
  @include _main-content-background();
}

@mixin apply-component-overrides() {
  @include mat.toolbar-overrides((
    container-background-color: var(--chrome-bg),
    container-text-color: var(--chrome-text)
  ));

  @include mat.sidenav-overrides((
    container-background-color: var(--chrome-bg),
    container-text-color: var(--chrome-text)
  ));

  @include mat.button-toggle-overrides((
    background-color: var(--overlay-on-surface-08),
    selected-state-background-color: var(--mat-sys-primary),
    selected-state-text-color: var(--mat-sys-on-primary),
    text-color: var(--mat-sys-on-surface)
  ));
}

@mixin _chrome-element-adjustments() {
  mat-toolbar,
  mat-sidenav {
    .mat-mdc-icon-button {
      color: var(--chrome-text);
    }
  }
}

@mixin _main-content-background() {
  .main-content {
    background-color: var(--mat-sys-background);
  }
}

@mixin _button-overrides() {
  @include _button-primary-overrides();
  @include _button-secondary-overrides();
  @include _button-tertiary-overrides();
  @include _button-size-overrides();
  @include _button-shape-overrides();
}

@mixin _button-primary-overrides() {
  [color="primary"] {
    @include mat.button-overrides((
      tonal-container-color: var(--mat-sys-primary-container),
      tonal-label-text-color: var(--mat-sys-on-primary-container),
      tonal-state-layer-color: var(--mat-sys-on-primary-container),
      tonal-ripple-color: var(--mat-sys-on-primary-container),
    ));
  }
}

@mixin _button-secondary-overrides() {
  [color="secondary"] {
    @include mat.button-overrides((
      filled-container-color: var(--mat-sys-secondary),
      filled-label-text-color: var(--mat-sys-on-secondary),
      filled-state-layer-color: var(--mat-sys-on-secondary),
      filled-ripple-color: var(--mat-sys-on-secondary),

      protected-label-text-color: var(--mat-sys-secondary),
      protected-state-layer-color: var(--mat-sys-secondary),
      protected-ripple-color: var(--mat-sys-secondary),

      outlined-label-text-color: var(--mat-sys-secondary),
      outlined-outline-color: var(--mat-sys-secondary),
      outlined-state-layer-color: var(--mat-sys-secondary),
      outlined-ripple-color: var(--mat-sys-secondary),

      text-label-text-color: var(--mat-sys-secondary),
      text-state-layer-color: var(--mat-sys-secondary),
      text-ripple-color: var(--mat-sys-secondary),

      tonal-container-color: var(--mat-sys-secondary-container),
      tonal-label-text-color: var(--mat-sys-on-secondary-container),
      tonal-state-layer-color: var(--mat-sys-on-secondary-container),
      tonal-ripple-color: var(--mat-sys-on-secondary-container),
    ));
  }
}

@mixin _button-tertiary-overrides() {
  [color="tertiary"] {
    @include mat.button-overrides((
      filled-container-color: var(--mat-sys-tertiary),
      filled-label-text-color: var(--mat-sys-on-tertiary),
      filled-state-layer-color: var(--mat-sys-on-tertiary),
      filled-ripple-color: var(--mat-sys-on-tertiary),

      protected-label-text-color: var(--mat-sys-tertiary),
      protected-state-layer-color: var(--mat-sys-tertiary),
      protected-ripple-color: var(--mat-sys-tertiary),

      outlined-label-text-color: var(--mat-sys-tertiary),
      outlined-outline-color: var(--mat-sys-tertiary),
      outlined-state-layer-color: var(--mat-sys-tertiary),
      outlined-ripple-color: var(--mat-sys-tertiary),

      text-label-text-color: var(--mat-sys-tertiary),
      text-state-layer-color: var(--mat-sys-tertiary),
      text-ripple-color: var(--mat-sys-tertiary),

      tonal-container-color: var(--mat-sys-tertiary-container),
      tonal-label-text-color: var(--mat-sys-on-tertiary-container),
      tonal-state-layer-color: var(--mat-sys-on-tertiary-container),
      tonal-ripple-color: var(--mat-sys-on-tertiary-container),
    ));
  }
}

// Tamaños de botones usando CSS directo (Material no expone estos como tokens configurables)
@mixin _button-size-overrides() {
  // Small buttons
  .mdc-button {
    &.btn-size-small {
      min-height: 32px;
      padding: 0 12px;
      font-size: 0.75rem;
      line-height: 1rem;

      .mat-icon {
        font-size: 1rem;
        width: 1rem;
        height: 1rem;
      }
    }

    // Medium buttons (default)
    &.btn-size-medium {
      min-height: 36px;
      padding: 0 16px;
      font-size: 0.875rem;
      line-height: 1.25rem;

      .mat-icon {
        font-size: 1.25rem;
        width: 1.25rem;
        height: 1.25rem;
      }
    }

    // Large buttons
    &.btn-size-large {
      min-height: 42px;
      padding: 0 24px;
      font-size: 1rem;
      line-height: 1.5rem;

      .mat-icon {
        font-size: 1.5rem;
        width: 1.5rem;
        height: 1.5rem;
      }
    }
  }
}

// Formas de botones usando tokens válidos
@mixin _button-shape-overrides() {
  .mdc-button.btn-shape-square {
    @include mat.button-overrides((
      filled-container-shape: 4px,
      outlined-container-shape: 4px,
      protected-container-shape: 4px,
      text-container-shape: 4px,
      tonal-container-shape: 4px,
    ));
  }

  .mdc-button.btn-shape-rounded {
    @include mat.button-overrides((
      filled-container-shape: 9999px,
      outlined-container-shape: 9999px,
      protected-container-shape: 9999px,
      text-container-shape: 9999px,
      tonal-container-shape: 9999px,
    ));
  }
}
